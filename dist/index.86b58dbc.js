var e;let t,i;const a=[];localStorage.getItem("watchList")&&JSON.parse(localStorage.getItem("watchList"));const n=async function(){try{let e=await fetch("/.netlify/functions/fetch-movie"),t=(await e.json()).results;return t.forEach(e=>{a.push(e)}),t}catch(e){console.log(e)}},s=async function(e){try{let t=await fetch(`/.netlify/functions/fetch-movie?query=${e}`);return(await t.json()).results}catch(e){console.log(e)}},o=async function(e){try{let t=await fetch(`/.netlify/functions/fetch-movie?with_genres=${e}`);return(await t.json()).results}catch(e){console.log(e)}},l=async function(e,t){try{let i=await fetch(`/.netlify/functions/fetch-movie?query=${e}`),a=(await i.json()).results,n=localStorage.getItem("watchList")?JSON.parse(localStorage.getItem("watchList")):[];a.forEach(e=>{if(0===n.length||e.id===Number(t)){let t=n.some(t=>t.id===e.id);if(!1===t)n.push(e),localStorage.setItem("watchList",JSON.stringify(n));else throw console.log("Movie is already in your watchlist"),Error("Movie is already in your watchlist")}})}catch(e){throw e}},c=function(e){let t=(localStorage.getItem("watchList")?JSON.parse(localStorage.getItem("watchList")):[]).filter(t=>{if(t.id!==Number(e))return t});localStorage.setItem("watchList",JSON.stringify(t))};document.addEventListener("click",e=>{let t;let i=e.target.matches("[data-dropdown-button]"),a=document.querySelector(".fa-caret-down");(i||null==e.target.closest("[data-dropdown]"))&&(i&&((t=e.target.closest("[data-dropdown]")).classList.toggle("active"),a.classList.toggle("fa-caret-down__rotate")),document.querySelectorAll("[data-dropdown].active").forEach(e=>{e!==t&&(e.classList.remove("active"),a.classList.remove("fa-caret-down__rotate"))}))});const d={action:28,adventure:12,animation:16,comedy:35,crime:80,documentary:99,drama:18,family:10751,fantasy:14,history:36,horror:27,music:10402,mystery:9648,romance:10749,science_fiction:878,tv_movie:10770,thriller:53,war:10752,western:37},r=function(e){let t=e.charAt(0).toUpperCase(),i=e.slice(1);return`${t}${i}`},u=function(e){for(let[t,i]of Object.entries(d))if(e===i){if(t.includes("_"))return t.split("_").map(e=>r(e)).join(" ");return r(t)}},m=function(e){return e.genre_ids.map(e=>{for(let[t,i]of Object.entries(d))if(e===i){if(t.includes("_"))return t.split("_").map(e=>r(e)).join(" ");return r(t)}}).join(", ")},g=function(e){let t=document.querySelector(".modal");document.querySelector(".modal__message").textContent=e,t.classList.add("active"),setTimeout(()=>{t.classList.remove("active")},3e3)},p=function(e){let a=e[Math.floor(20*Math.random())],n=m(a);document.body.style.backgroundImage=`linear-gradient(to bottom right, rgba(13, 16, 24, 0.8), rgba(0, 0, 0, 0.9)), url(https://image.tmdb.org/t/p/original${a.backdrop_path})`;let s=document.createElement("div");s.classList.add("container");let o=document.createElement("section");o.classList.add("featured");let l=document.createElement("h1");l.classList.add("featured__title"),l.textContent=a.title;let c=document.createElement("div");c.classList.add("featured__info");let d=document.createElement("h2");d.classList.add("featured__date"),d.textContent=a.release_date.slice(0,4);let r=document.createElement("h2");r.classList.add("featured__genre"),r.textContent=n;let u=document.createElement("p");u.classList.add("featured__overview"),u.dataset.title=a.title,u.dataset.movie_id=a.id,u.textContent=a.overview;let p=document.createElement("button");p.classList.add("featured__watch"),p.textContent="Start";let v=document.createElement("button");v.classList.add("featured__list"),v.textContent="Add to List",v.addEventListener("click",function(){t=this.previousSibling.previousSibling.dataset.title,i=this.previousSibling.previousSibling.dataset.movie_id,g()});let h=document.createElement("div");h.classList.add("swiper");let L=document.createElement("div");L.classList.add("swiper-wrapper");let y=document.createElement("div");y.classList.add("swiper-button-prev");let w=document.createElement("div");w.classList.add("swiper-button-next"),f.innerHTML="",c.appendChild(d),c.appendChild(r),o.appendChild(l),o.appendChild(c),o.appendChild(u),o.appendChild(p),o.appendChild(v),s.appendChild(o),h.appendChild(L),h.appendChild(y),h.appendChild(w),s.appendChild(h),f.appendChild(s),_(e,L)},v=document.getElementById("nav-logo"),h=document.getElementById("nav-home"),_=function(e,a){e.forEach(e=>{let n=document.createElement("div");n.classList.add("swiper-slide");let s=document.createElement("img");s.classList.add("swiper-img"),s.dataset.title=e.original_title,s.dataset.movie_id=e.id,s.src=`https://image.tmdb.org/t/p/original${e.poster_path}`;let o=document.createElement("button");o.classList.add("swiper-watch-button"),o.textContent="Watch",o.addEventListener("click",function(){t=this.previousSibling.dataset.title,i=this.previousSibling.dataset.movie_id});let l=document.createElement("button");l.classList.add("swiper-list-button"),l.textContent="Add to List",l.addEventListener("click",function(){t=this.previousSibling.previousSibling.dataset.title,i=this.previousSibling.previousSibling.dataset.movie_id}),n.appendChild(s),n.appendChild(o),n.appendChild(l),a.appendChild(n)}),new Swiper(".swiper",{direction:"horizontal",loop:!0,autoplay:{delay:5e3,pauseOnMouseEnter:"true"},mousewheel:{invert:!0},keyboard:{enabled:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:1,spaceBetween:10,breakpoints:{460:{slidesPerView:2,spaceBetween:10},720:{slidesPerView:3,spaceBetween:10},1e3:{slidesPerView:4,spaceBetween:20},1400:{slidesPerView:4,spaceBetween:30},1700:{slidesPerView:5,spaceBetween:40}}})},f=document.querySelector(".main"),L=document.querySelector(".mobile-menu__hamburger"),y=document.querySelector(".mobile-menu__off-screen");L.addEventListener("click",function(){f.classList.toggle("active"),L.classList.toggle("active"),y.classList.toggle("active")});const w=document.getElementById("mobile-home"),b=document.getElementById("mobile-watchlist"),E=document.querySelectorAll(".mobile-menu__genre-link");b.addEventListener("click",function(){j(),f.classList.toggle("active"),L.classList.toggle("active"),y.classList.toggle("active")});const S=async function(e,a){let n=document.querySelector(".main"),s=document.createElement("div");s.classList.add("container"),s.classList.add("grid");let o=document.createElement("h2");o.classList.add("movie-grid__title"),o.textContent=u(a),s.appendChild(o),e.forEach(e=>{let a=document.createElement("div");a.classList.add("movie-grid__item");let n=document.createElement("img");n.dataset.title=e.original_title,n.dataset.movie_id=e.id,n.classList.add("movie-grid__img"),n.src=`https://image.tmdb.org/t/p/original${e.poster_path}`;let o=document.createElement("button");o.classList.add("movie-grid__watch-button"),o.textContent="Watch",o.addEventListener("click",function(){t=this.previousSibling.dataset.title,i=this.previousSibling.dataset.movie_id});let l=document.createElement("button");l.classList.add("movie-grid__list-button"),l.textContent="Add to List",l.addEventListener("click",function(){t=this.previousSibling.previousSibling.dataset.title,i=this.previousSibling.previousSibling.dataset.movie_id}),a.appendChild(n),a.appendChild(o),a.appendChild(l),s.appendChild(a)}),n.innerHTML="",n.appendChild(s)},C=function(e,t){let a=e.filter(e=>{if(e.id===Number(i))return e})[0],n=m(a);document.body.style.backgroundImage=`linear-gradient(to bottom right, rgba(13, 16, 24, 0.8), rgba(0, 0, 0, 0.9)), url(https://image.tmdb.org/t/p/original${a.backdrop_path})`;let s=document.querySelector(".featured__title"),o=document.querySelector(".featured__info"),l=document.querySelector(".featured__date"),c=document.querySelector(".featured__genre"),d=document.querySelector(".featured__overview"),r=document.querySelector(".featured__watch"),u=document.querySelector(".featured__list");d.dataset.title=a.title,d.dataset.movie_id=a.id,s.textContent=a.title,o.classList.add("featured__info"),l.textContent=a.release_date.slice(0,4),c.textContent=n,d.textContent=a.overview,r.textContent="Start",u.textContent="Add to List"},k=document.querySelector(".nav__input"),q=document.querySelector(".nav__search-btn"),x=document.querySelector(".mobile-menu__input"),I=document.querySelector(".mobile-menu__search-btn"),V=function(e,t){S(e,t),document.querySelector(".movie-grid__title").textContent=`Your search results for: ${t}`},j=function(){let e=document.querySelector(".main"),a=localStorage.getItem("watchList")?JSON.parse(localStorage.getItem("watchList")):[];if(0===a.length){let t=document.createElement("h1");t.classList.add("watchlist__error"),t.textContent="Your watchlist is empty",e.innerHTML="",e.appendChild(t)}else{let e=document.querySelector(".main"),n=document.createElement("div");n.classList.add("container"),n.classList.add("grid");let s=document.createElement("h2");s.classList.add("movie-grid__title"),s.textContent="Your Watchlist",n.appendChild(s),a.forEach(e=>{let a=document.createElement("div");a.classList.add("movie-grid__item");let s=document.createElement("img");s.dataset.title=e.original_title,s.dataset.movie_id=e.id,s.classList.add("movie-grid__img"),s.src=`https://image.tmdb.org/t/p/original${e.poster_path}`;let o=document.createElement("button");o.classList.add("movie-grid__watch-button"),o.textContent="Watch",o.addEventListener("click",function(){t=this.previousSibling.dataset.title,i=this.previousSibling.dataset.movie_id});let l=document.createElement("button");l.classList.add("movie-grid__list-button"),l.textContent="Add to List",l.addEventListener("click",function(){t=this.previousSibling.previousSibling.dataset.title,i=this.previousSibling.previousSibling.dataset.movie_id});let c=document.createElement("button");c.classList.add("movie-grid__delete-button"),c.dataset.movie_id=e.id,c.textContent="Delete",a.appendChild(s),a.appendChild(o),a.appendChild(l),a.appendChild(c),n.appendChild(a)}),e.innerHTML="",e.appendChild(n)}};document.getElementById("nav-watchlist").addEventListener("click",j);const B=function(){let e=document.querySelector(".main"),t=document.createElement("h1");t.classList.add("watchlist__error"),t.textContent="Something went wrong with your request",e.innerHTML="",e.appendChild(t)},M=async function(){try{let e=await n();p(e)}catch(e){console.log(e),B()}},$=async function(e){try{let t=await o(e);S(t,e)}catch(e){console.log(e),B()}},A=async function(e){try{let t=await s(e);if(document.querySelector(".featured"))C(t,e);else{let i=await n();p(i),C(t,e)}}catch(e){console.log(e),B()}},N=async function(e){try{let t=await s(e);V(t,e)}catch(e){console.log(e),B()}},O=async function(e,t){try{await l(e,t),g("Movie has been added")}catch(e){console.log(e.message),g(e.message)}};M(),document.querySelectorAll(".dropdown__link").forEach(e=>{e.addEventListener("click",function(e){let t=e.target.dataset.genre;t.includes(" ")&&(t=t.split(" ").join("_")),$(d[t]);let i=e.target.closest("[data-dropdown]"),a=document.querySelector(".fa-caret-down");i.classList.remove("active"),a.classList.remove("fa-caret-down__rotate")})}),v.addEventListener("click",M),h.addEventListener("click",M),document.addEventListener("click",function(e){(e.target.matches(".swiper-watch-button")||e.target.matches(".movie-grid__watch-button"))&&A(t)}),function(e){let t=["{","}","<",">","[","]",";","|"];k.addEventListener("keypress",function(i){"Enter"===i.key&&(k.value.split("").some(e=>t.includes(e))?(k.setCustomValidity("Invalid characters { } [ ] < > ; |"),k.reportValidity()):(e(k.value),k.value=""))}),x.addEventListener("keypress",function(i){"Enter"===i.key&&(x.value.split("").some(e=>t.includes(e))?(x.setCustomValidity("Invalid characters { } [ ] < > ; |"),x.reportValidity()):(e(x.value),x.value="",f.classList.toggle("active"),L.classList.toggle("active"),y.classList.toggle("active")))}),q.addEventListener("click",function(){k.value.split("").some(e=>t.includes(e))?(k.setCustomValidity("Invalid characters { } [ ] < > ; |"),k.reportValidity()):(e(k.value),k.value="")}),I.addEventListener("click",function(){x.value.split("").some(e=>t.includes(e))?(x.setCustomValidity("Invalid characters { } [ ] < > ; |"),x.reportValidity()):(e(x.value),x.value="",f.classList.toggle("active"),L.classList.toggle("active"),y.classList.toggle("active"))})}(N),document.addEventListener("click",function(e){(e.target.matches(".featured__list")||e.target.matches(".swiper-list-button")||e.target.matches(".movie-grid__list-button"))&&O(t,i)}),e=function(e){c(e),j()},document.addEventListener("click",function(t){t.target.matches(".movie-grid__delete-button")&&e(t.target.dataset.movie_id)}),w.addEventListener("click",function(){M(),f.classList.toggle("active"),L.classList.toggle("active"),y.classList.toggle("active")}),E.forEach(e=>{e.addEventListener("click",function(e){let t=e.target.dataset.genre;t.includes(" ")&&(t=t.split(" ").join("_")),$(d[t]),f.classList.toggle("active"),L.classList.toggle("active"),y.classList.toggle("active")})});
//# sourceMappingURL=index.86b58dbc.js.map
